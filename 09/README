Задание 09 (Семафоры System V, 2 балла)
Скорректировать программу 08 так, чтобы несколько процессов (ограниченное количество) могли читать из файла. Запись в файл возможна, когда он никем не читается.


Объяснение изменений
Создание двух семафоров:

Мы создаем два семафора: один для управления записью (индекс 0) и другой для управления чтением (индекс 1).
Инициализация семафоров:

Инициализируем оба семафора с начальным значением 1.
Блокировка и разблокировка для записи:

Используем lock_write_op и unlock_write_op для блокировки и разблокировки записи в файл.
Блокировка и разблокировка для чтения:

Используем lock_read_op и unlock_read_op для блокировки и разблокировки чтения из файла.
Синхронизация доступа к файлу:

Перед записью в файл блокируем семафор записи.
После записи разблокируем семафор записи.
Перед чтением из файла блокируем семафор чтения.
После чтения разблокируем семафор чтения.

Проверка и удаление существующего семафора:

Перед созданием нового семафора, программа проверяет, существует ли семафор с указанным ключом, и удаляет его, если он существует.
Создание нового семафора:

После удаления существующего семафора, программа создает новый семафор с тем же ключом.
